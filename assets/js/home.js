var headerh, screenh, hash;

var hashes = [ 'home', 'topics', 'concept' ];

var headernav = document.getElementById('header-nav');

//=================================================================================
//=================================================================================

var pointer=SVG('<g><path d="m 29.263437,268.50549 c 0.248156,0.25911 0.492845,0.52188 0.733328,0.7914 2.825217,3.17073 4.795728,6.87124 5.881368,10.78944 l -0.30474,0.30474 L -1.8187169e-5,296.99999 16.609852,261.4275 l 0.252261,-0.25226 c 4.632231,1.25294 8.934009,3.73523 12.401375,7.33015 z" id="path820"></path><path style="fill: #ffc251;" d="m 132.0189,166.75712 c 1.9838,2.15581 3.22082,4.99478 3.41892,7.91998 0.1863,2.74977 -0.53407,5.55428 -2.02358,7.8731 l -89.153835,89.15386 c -1.549161,-3.43116 -3.621651,-6.66721 -6.214292,-9.57695 -3.629681,-4.07367 -8.007622,-7.21181 -12.788644,-9.34723 L 114.4507,163.58666 c 2.31882,-1.48955 5.12238,-2.21073 7.87215,-2.02453 3.3431,0.22634 6.57407,1.81038 8.80051,4.31449 0.3138,0.27748 0.61212,0.57252 0.89529,0.88075 z" id="path826"></path></g>');

pointer.fill('#00ec9e');
pointer.opacity(0.75);
pointer.width(20);
pointer.height(20);
pointer.addClass('pointer');

pointer.move(39,26);

var canvas = SVG();

canvas.viewbox(0,0,100,100);

canvas.add(pointer);

var text = canvas.group();

var txt1 = text.group().path('m 5.8726939,11.352013 c 0.1157862,-0.0013 0.2310618,-0.03458 0.3296533,-0.09531 0.098591,-0.06073 0.1802206,-0.148681 0.2334347,-0.251522 0.055461,-0.107184 0.079817,-0.230015 0.070971,-0.350374 -0.00885,-0.120358 -0.05069,-0.237934 -0.1186111,-0.33769 C 6.2827029,10.162259 6.1204417,10.055486 5.9539199,9.9696409 5.4898664,9.7304123 4.9500968,9.6245575 4.4363437,9.7174757 3.9225906,9.8103939 3.4408772,10.111802 3.1703109,10.558311 c -0.1190677,0.196494 -0.1972553,0.421022 -0.2021332,0.650725 -0.00488,0.229703 0.067402,0.464247 0.2187832,0.637079 0.093624,0.106891 0.2141532,0.187663 0.3420546,0.249568 0.1279013,0.06191 0.2636427,0.105821 0.3994364,0.147667 0.2923716,0.0901 0.5882571,0.171869 0.8695647,0.292138 0.2813076,0.12027 0.5501885,0.281795 0.7549893,0.509073 0.1735898,0.192642 0.2969303,0.429189 0.3617201,0.68028 0.06479,0.25109 0.071471,0.51629 0.025734,0.771539 -0.091475,0.510499 -0.3924569,0.971874 -0.7934266,1.300812 -0.4487587,0.368142 -1.0154297,0.575947 -1.591241,0.64912 -0.8676802,0.110262 -1.786118,-0.0885 -2.483433,-0.616491 C 0.68561666,15.536987 0.36662978,15.137957 0.23381089,14.671394 0.11639271,14.258931 0.15180751,13.804806 0.33174905,13.415532 0.51169058,13.026258 0.8346681,12.70506 1.2249299,12.527271');
var txt2 = text.group().path('m 7.2577049,13.997038 c 0.2027331,-0.202827 0.4054663,-0.405654 0.6258558,-0.645354 0.2203895,-0.2397 0.4584344,-0.516273 0.6703624,-0.799526 0.2119279,-0.283252 0.397738,-0.573187 0.5461215,-0.834491 0.1483835,-0.261304 0.2593369,-0.493981 0.3145092,-0.676638 0.055172,-0.182657 0.054539,-0.315348 0.019743,-0.395812 -0.034796,-0.08047 -0.10388,-0.10864 -0.2096418,-0.09019 -0.1057619,0.01845 -0.2481112,0.0836 -0.4749678,0.303919 -0.2268567,0.220316 -0.5381486,0.595745 -0.8066175,1.005814 -0.2684689,0.410069 -0.4940869,0.854721 -0.64397,1.248609 -0.1498831,0.393888 -0.2240275,0.736948 -0.2594743,1.037727 -0.035447,0.300779 -0.032213,0.559231 -0.00201,0.749983 0.030207,0.190752 0.087325,0.313774 0.1757342,0.390292 0.088409,0.07652 0.2080363,0.106627 0.3273011,0.102156 0.1192648,-0.0045 0.2382235,-0.04347 0.375614,-0.14022 0.1373905,-0.09675 0.2932708,-0.251269 0.5521477,-0.568021 0.2588768,-0.316751 0.6207583,-0.795749 0.982634,-1.274739 -0.217419,0.322539 -0.4348549,0.645103 -0.5701867,0.899816 -0.1353318,0.254713 -0.188571,0.441546 -0.2087737,0.591238 -0.020203,0.149692 -0.0074,0.262188 0.024872,0.339889 0.032275,0.0777 0.083918,0.120626 0.178636,0.128546 0.094718,0.0079 0.2325359,-0.01905 0.3633191,-0.09688 0.1307831,-0.07783 0.2546093,-0.20654 0.4100736,-0.385986 0.1554643,-0.179446 0.3425637,-0.409628 0.4601461,-0.582021 0.117582,-0.172394 0.165656,-0.287035 0.237611,-0.410597 0.07196,-0.123561 0.167779,-0.256001 0.286677,-0.378667 0.118898,-0.122665 0.260835,-0.235517 0.38438,-0.31897 0.123544,-0.08345 0.228663,-0.137495 0.350462,-0.172451 0.121799,-0.03496 0.260218,-0.05084 0.387394,-0.03701 0.127177,0.01383 0.243068,0.05731 0.321744,0.09196 0.07868,0.03465 0.120146,0.06045 0.135641,0.123084 0.0155,0.06263 0.0052,0.162075 -0.04716,0.315992 -0.05233,0.153918 -0.146648,0.362346 -0.202163,0.520843 -0.05552,0.158496 -0.07224,0.26701 -0.09487,0.361266 -0.02263,0.09426 -0.05116,0.174275 -0.130803,0.286303 -0.07964,0.112028 -0.210394,0.256115 -0.342398,0.372107 -0.132004,0.115993 -0.265276,0.203903 -0.388473,0.261362 -0.123197,0.05746 -0.236365,0.08446 -0.340678,0.08163 -0.104312,-0.0028 -0.199818,-0.03555 -0.281944,-0.09002 -0.08213,-0.05448 -0.150841,-0.130773 -0.195105,-0.236831 -0.04426,-0.106059 -0.06399,-0.241881 -0.06872,-0.358389 -0.0047,-0.116509 0.0056,-0.213775 0.01588,-0.310944 -0.0079,0.0913 -0.01579,0.182706 -0.01454,0.288027 0.0012,0.105322 0.01162,0.224637 0.04603,0.327165 0.03442,0.102528 0.09281,0.18826 0.166443,0.250731 0.07363,0.06247 0.162462,0.101747 0.25398,0.11608 0.09152,0.01433 0.185758,0.0038 0.285618,-0.02883 0.09986,-0.03262 0.205394,-0.0873 0.308562,-0.151936 0.103167,-0.06464 0.203985,-0.139228 0.306066,-0.241682 0.102081,-0.102453 0.205448,-0.232787 0.289976,-0.412518 0.08453,-0.17973 0.150221,-0.4089 0.247862,-0.674787 0.09764,-0.265886 0.227225,-0.56845 0.348026,-0.820945 0.120801,-0.252494 0.23281,-0.454889 0.35543,-0.665635 0.122621,-0.210747 0.255845,-0.429826 0.423825,-0.670829 0.167979,-0.241004 0.37071,-0.503916 0.573432,-0.766818 -0.144294,0.190055 -0.2886,0.380126 -0.411311,0.545915 -0.12271,0.165789 -0.22383,0.307304 -0.321214,0.456649 -0.09738,0.149345 -0.191022,0.306501 -0.28891,0.47769 -0.09789,0.171189 -0.20002,0.356398 -0.287508,0.537149 -0.08749,0.180751 -0.160326,0.357017 -0.234765,0.53967 -0.07444,0.182652 -0.150479,0.371682 -0.214098,0.555909 -0.06362,0.184226 -0.114819,0.363626 -0.140445,0.510618 -0.02563,0.146993 -0.0257,0.261532 6.25e-4,0.37343 0.02632,0.111897 0.07898,0.22112 0.160926,0.282418 0.08195,0.0613 0.193119,0.07479 0.313692,0.04187 0.120573,-0.03291 0.250628,-0.112193 0.36374,-0.217839 0.113112,-0.105647 0.209321,-0.237694 0.314924,-0.325022 0.105604,-0.08733 0.220519,-0.129892 0.36012,-0.153335 0.139601,-0.02344 0.303836,-0.02779 0.466121,-0.0561 0.162286,-0.02831 0.322654,-0.08057 0.483389,-0.156461 0.160735,-0.07589 0.32186,-0.175414 0.451799,-0.288363 0.129939,-0.11295 0.228725,-0.239352 0.289692,-0.359066 0.06097,-0.119714 0.08412,-0.2328 0.07622,-0.335318 -0.0079,-0.102519 -0.0469,-0.194508 -0.118345,-0.252663 -0.07144,-0.05816 -0.175376,-0.08237 -0.295722,-0.07658 -0.120346,0.0058 -0.257044,0.04163 -0.424592,0.142048 -0.167548,0.100422 -0.365872,0.265413 -0.533512,0.452425 -0.16764,0.187013 -0.304557,0.396001 -0.391261,0.577228 -0.0867,0.181228 -0.123191,0.334631 -0.120774,0.491356 0.0024,0.156724 0.04368,0.316706 0.11453,0.441956 0.07085,0.125251 0.171192,0.215785 0.302082,0.271038 0.130889,0.05525 0.292307,0.07531 0.459048,0.06218 0.166741,-0.01313 0.338838,-0.05942 0.508287,-0.144962 0.16945,-0.08554 0.336298,-0.210349 0.459504,-0.3149 0.123205,-0.104552 0.202785,-0.188863 0.282368,-0.273178');
var txt3 = text.group().path('m 10.088302,12.417222 c -0.02458,-0.0018 -0.04954,0.0016 -0.07274,0.0099 -0.035261,0.01267 -0.066351,0.03704 -0.08636,0.06872 -0.020008,0.03168 -0.028653,0.07054 -0.023111,0.107595 0.0054,0.03611 0.024226,0.07001 0.051835,0.0939 0.027609,0.02389 0.063746,0.03764 0.1002493,0.03844 0.04005,8.74e-4 0.08023,-0.01392 0.110151,-0.04055 0.02992,-0.02663 0.04927,-0.06483 0.05304,-0.104709 0.0038,-0.03988 -0.0081,-0.08103 -0.03246,-0.112799 -0.0244,-0.03177 -0.06109,-0.05384 -0.100591,-0.06049 z');
var txt4 = text.group().path('m 18.586588,13.986136 c -0.12071,-0.08495 -0.241548,-0.169998 -0.422434,-0.231741 -0.180887,-0.06174 -0.421813,-0.100119 -0.63444,-0.121115 -0.212626,-0.021 -0.396927,-0.0246 -0.58313,-0.0019 -0.186204,0.02265 -0.374263,0.07157 -0.556795,0.162169 -0.182532,0.0906 -0.359469,0.222872 -0.491194,0.362051 -0.131725,0.139178 -0.218195,0.285212 -0.268234,0.451396 -0.05004,0.166183 -0.06366,0.35244 -0.03453,0.529481 0.02913,0.177041 0.10093,0.344821 0.206276,0.486202 0.105347,0.141382 0.244167,0.256389 0.382508,0.339342 0.138341,0.08295 0.276185,0.133894 0.445945,0.160526 0.169761,0.02663 0.371447,0.029 0.562687,0.007 0.19124,-0.02197 0.372061,-0.06825 0.549132,-0.138756 0.17707,-0.07051 0.350418,-0.165226 0.540528,-0.298893 0.190109,-0.133667 0.396994,-0.30628 0.666475,-0.604131 0.269482,-0.297852 0.601566,-0.720945 0.95196,-1.230372 0.350395,-0.509426 0.719084,-1.105168 0.983865,-1.527316 0.264781,-0.422148 0.425639,-0.670676 0.560842,-0.864309 0.135204,-0.193634 0.24475,-0.332362 0.354288,-0.47108 -0.140164,0.42013 -0.28035,0.840325 -0.404415,1.21209 -0.124065,0.371764 -0.232026,0.69515 -0.319857,0.968757 -0.08783,0.273606 -0.155525,0.497413 -0.222372,0.758891 -0.06685,0.261478 -0.132847,0.560603 -0.167073,0.793132 -0.03422,0.232529 -0.03669,0.398316 -0.03916,0.564215 0.335419,-0.496303 0.670821,-0.992582 1.003524,-1.458664 0.332703,-0.466083 0.662673,-0.901919 1.003913,-1.329281 0.34124,-0.427361 0.693725,-0.846216 0.952379,-1.128277 0.258653,-0.282061 0.423438,-0.42729 0.588234,-0.572528 -0.173893,0.403856 -0.34781,0.807764 -0.531723,1.251921 -0.183914,0.444157 -0.37784,0.928591 -0.541133,1.402696 -0.163293,0.474106 -0.295944,0.937838 -0.375744,1.281931 -0.0798,0.344093 -0.106752,0.5685 -0.09725,0.786891 0.0095,0.218391 0.05543,0.430708 0.143141,0.62319 0.08771,0.192483 0.217138,0.365122 0.392719,0.476982 0.175582,0.11186 0.39727,0.163028 0.640645,0.143982 0.243374,-0.01905 0.508482,-0.108254 0.773529,-0.197441');
var txt5 = text.group().path('m 24.284088,14.578987 c 0.155468,-0.01871 0.310842,-0.03741 0.469083,-0.07284 0.15824,-0.03543 0.319365,-0.08758 0.47521,-0.161721 0.155846,-0.07414 0.306445,-0.170256 0.43001,-0.278148 0.123565,-0.107893 0.220125,-0.227576 0.281107,-0.343274 0.06098,-0.115699 0.08639,-0.22747 0.07941,-0.32544 -0.007,-0.09797 -0.04643,-0.182193 -0.11541,-0.237116 -0.06898,-0.05492 -0.167547,-0.08045 -0.287633,-0.06956 -0.120086,0.01088 -0.261614,0.05823 -0.421328,0.15732 -0.159713,0.09909 -0.337548,0.249893 -0.491691,0.42152 -0.154143,0.171626 -0.284561,0.364032 -0.369902,0.542158 -0.08534,0.178126 -0.125598,0.341908 -0.126612,0.497487 -0.001,0.155579 0.03716,0.302893 0.106639,0.421715 0.06948,0.118821 0.170169,0.209164 0.297028,0.264657 0.12686,0.05549 0.279874,0.07622 0.441073,0.0624 0.161199,-0.01382 0.330626,-0.06214 0.491902,-0.138779 0.161276,-0.07664 0.314441,-0.181608 0.438075,-0.279614 0.123635,-0.09801 0.217758,-0.189065 0.311878,-0.280122');

var len1 = txt1.length();
var len2 = txt2.length();
var len3 = txt3.length();
var len4 = txt4.length();
var len5 = txt5.length();

text.attr({'fill':'none','stroke':'#00ec9e','stroke-width':0.3,'stroke-linecap':'round','stroke-linejoin':'round'});

var w = text.width();
var h = text.height();

text.width(99);
text.height(h*99/w);
text.center(50,50);

canvas.addTo('#home .svg');

function changeHeaderColor(){
    hash = window.location.hash.replace('#/', '');
    
    for(var i=0; i < hashes.length; i++){
        if(hashes[i] == hash){
            headernav.children[i].style.opacity = 1;
        }
        else{
            headernav.children[i].style.opacity = 0.4;
        }
    }
}

Reveal.initialize({
    hash: true,
    disableLayout: true,
    controlsTutorial: false
});

Reveal.on( 'ready', function(event) {
    screenh = window.innerHeight;

    headerh = document.getElementById('header-nav').offsetHeight;

    document.querySelector('.reveal').style.height = (screenh - headerh) + 'px';

    update_height(screenh, headerh);

    handleSvgSize(screenh, headerh);

    changeHeaderColor();
} );

Reveal.on('slidechanged', function(event){
    setTimeout(() => {
        changeHeaderColor();
    }, 100);
});

window.addEventListener('resize', function(){
    screenh = window.innerHeight;

    headerh = document.getElementById('header-nav').offsetHeight;

    document.querySelector('.reveal').style.height = (screenh - headerh) + 'px';

    update_height(screenh, headerh);

    handleSvgSize(screenh, headerh);
});